# workers/wrangler.toml
# Cloudflare Worker configuration
# Deploy to: workers/wrangler.toml

name = "banity-worker"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Cron triggers
[triggers]
crons = [
  "* * * * *",       # Every minute - process job queue
  "*/5 * * * *",     # Every 5 minutes - check monitoring schedule  
  "0 0 * * *"        # Daily - cleanup old jobs
]

# Development
[dev]
port = 8787

# Environment variables - set via wrangler secret
# wrangler secret put SUPABASE_URL
# wrangler secret put SUPABASE_SERVICE_KEY
# wrangler secret put SCREENSHOT_API_KEY
# wrangler secret put SCREENSHOT_API_URL

# Production
[env.production]
name = "banity-worker-prod"

# Staging
[env.staging]
name = "banity-worker-staging"
