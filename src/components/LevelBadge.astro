---
// src/components/LevelBadge.astro
// Displays a creator's level badge with rank title

interface Props {
  level: number;
  showTitle?: boolean;
  showMultiplier?: boolean;
  size?: 'sm' | 'md' | 'lg';
}

const { level, showTitle = false, showMultiplier = false, size = 'md' } = Astro.props;

// Level definitions
const LEVELS: Record<number, { title: string; multiplier: number; color: string; icon: string }> = {
  10: { title: 'Recruit', multiplier: 1.0, color: '#6b7280', icon: '⬡' },
  20: { title: 'Digital Scout', multiplier: 1.1, color: '#8b5cf6', icon: '⬢' },
  30: { title: 'Digital Specialist', multiplier: 1.1, color: '#a855f7', icon: '◈' },
  40: { title: 'Ops Enforcer', multiplier: 1.2, color: '#c026d3', icon: '◆' },
  50: { title: 'Tactical Uplink', multiplier: 1.2, color: '#d946ef', icon: '⬣' },
  60: { title: 'Network Commander', multiplier: 1.3, color: '#ec4899', icon: '✦' },
  70: { title: 'Digital General', multiplier: 1.3, color: '#f43f5e', icon: '★' },
  80: { title: 'Campaign Marshal', multiplier: 1.4, color: '#f59e0b', icon: '✪' },
  90: { title: 'Digital Warlord', multiplier: 1.4, color: '#eab308', icon: '⚔' },
  100: { title: '5 Star Digital General', multiplier: 1.5, color: '#fbbf24', icon: '⭐' },
};

const levelInfo = LEVELS[level] || LEVELS[10];
const isMaxLevel = level >= 100;

const sizeClasses = {
  sm: 'badge-sm',
  md: 'badge-md',
  lg: 'badge-lg'
};
---

<span 
  class={`level-badge ${sizeClasses[size]} ${isMaxLevel ? 'max-level' : ''}`}
  style={`--badge-color: ${levelInfo.color};`}
  title={`${levelInfo.title} - ${levelInfo.multiplier}x multiplier`}
>
  <span class="badge-icon">{levelInfo.icon}</span>
  <span class="badge-level">Lv.{level}</span>
  {showTitle && <span class="badge-title">{levelInfo.title}</span>}
  {showMultiplier && levelInfo.multiplier > 1 && (
    <span class="badge-multiplier">{levelInfo.multiplier}x</span>
  )}
</span>

<style>
  .level-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.25rem 0.625rem;
    background: color-mix(in srgb, var(--badge-color) 15%, transparent);
    border: 1px solid color-mix(in srgb, var(--badge-color) 40%, transparent);
    border-radius: 100px;
    color: var(--badge-color);
    font-weight: 600;
    white-space: nowrap;
  }

  .badge-sm {
    font-size: 0.6875rem;
    padding: 0.125rem 0.5rem;
    gap: 0.25rem;
  }

  .badge-md {
    font-size: 0.75rem;
  }

  .badge-lg {
    font-size: 0.875rem;
    padding: 0.375rem 0.875rem;
    gap: 0.5rem;
  }

  .badge-icon {
    font-size: 1em;
  }

  .badge-level {
    font-family: 'Space Mono', monospace;
  }

  .badge-title {
    opacity: 0.9;
  }

  .badge-multiplier {
    font-family: 'Space Mono', monospace;
    font-size: 0.9em;
    padding: 0.125rem 0.375rem;
    background: color-mix(in srgb, var(--badge-color) 25%, transparent);
    border-radius: 100px;
  }

  .max-level {
    background: linear-gradient(135deg, 
      color-mix(in srgb, var(--badge-color) 20%, transparent),
      color-mix(in srgb, #f59e0b 20%, transparent)
    );
    border-color: var(--badge-color);
    animation: max-level-glow 2s ease-in-out infinite;
  }

  @keyframes max-level-glow {
    0%, 100% { 
      box-shadow: 0 0 10px color-mix(in srgb, var(--badge-color) 30%, transparent);
    }
    50% { 
      box-shadow: 0 0 20px color-mix(in srgb, var(--badge-color) 50%, transparent);
    }
  }

  .max-level .badge-icon {
    animation: star-spin 3s ease-in-out infinite;
  }

  @keyframes star-spin {
    0%, 100% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(1.2); }
  }
</style>
