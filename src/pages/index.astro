---
// src/pages/index.astro
export const prerender = false;

import Layout from "../layouts/Layout.astro";
import { supabase } from "../lib/supabase";
import { getPageContent } from "../lib/content";

// Load editable page content
const content = await getPageContent('home');

// Get current user session
const session = Astro.locals.session;
const user = session?.user;

// Load user profile if logged in
let userProfile = null;
if (user?.id) {
  const { data } = await supabase.from('profiles').select('*').eq('id', user.id).single();
  userProfile = data;
}

// Check if user account is pending
const isPending = userProfile?.status === 'pending';
const isApproved = userProfile?.status === 'active' && userProfile?.is_active;

// Load settings
let general = {
  siteName: 'Banity',
  tagline: 'Create Authentic Content. Get Paid.',
  description: 'Banity connects creators with brands for authentic UGC campaigns.',
};

let appearance = {
  primaryColor: '#2563eb',
  accentColor: '#059669',
};

try {
  const { data: rows } = await supabase.from('site_settings').select('key, value');
  if (rows) {
    for (const row of rows) {
      if (row.key === 'general') general = { ...general, ...row.value };
      if (row.key === 'appearance') appearance = { ...appearance, ...row.value };
    }
  }
} catch (e) {}

// Load announcements
let announcements: any[] = [];
try {
  const { data } = await supabase
    .from('messages')
    .select('id, subject, body, created_at')
    .eq('is_announcement', true)
    .order('created_at', { ascending: false })
    .limit(5);
  if (data) announcements = data;
} catch (e) {}

// Load active campaigns
let campaigns: any[] = [];
const showCampaigns = !user || isApproved;
if (showCampaigns) {
  const { data } = await supabase
    .from('campaigns')
    .select('id, title, slug, description, budget, payment_per_post, deadline, status')
    .eq('status', 'active')
    .order('created_at', { ascending: false })
    .limit(6);
  if (data) campaigns = data;
}

// Stats
const { count: creatorCount } = await supabase.from('profiles').select('*', { count: 'exact', head: true }).eq('role', 'creator').eq('status', 'active');
const { count: campaignCount } = await supabase.from('campaigns').select('*', { count: 'exact', head: true }).eq('status', 'active');
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{general.siteName} - {general.tagline}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Galaxy Canvas -->
  <canvas id="galaxy-canvas"></canvas>
  
  <!-- Main Content -->
  <div class="page-wrapper">
    <!-- Navigation -->
    <nav class="main-nav">
      <div class="nav-content">
        <a href="/" class="nav-logo">
          <span class="logo-icon">✦</span>
          <span class="logo-text">{general.siteName}</span>
        </a>
        <div class="nav-links">
          <a href="/campaigns">Campaigns</a>
          <a href="/community">Community</a>
          {user ? (
            isApproved ? (
              <a href="/dashboard" class="nav-btn">Dashboard</a>
            ) : (
              <span class="nav-btn pending">Pending</span>
            )
          ) : (
            <>
              <a href="/login" class="nav-link-subtle">Sign In</a>
              <a href="/signup" class="nav-btn">Join Now</a>
            </>
          )}
        </div>
      </div>
    </nav>

    <!-- Announcements -->
    {announcements.length > 0 && (
      <div class="announcements-ticker">
        <div class="ticker-content">
          <span class="ticker-icon">◆</span>
          {announcements.map((a, i) => (
            <span class="ticker-item" data-index={i}>{a.subject}</span>
          ))}
        </div>
      </div>
    )}

    <!-- Pending Notice -->
    {isPending && (
      <div class="pending-banner">
        <span class="pending-icon">◇</span>
        <span>Your application is under review. We'll notify you soon.</span>
      </div>
    )}

    <!-- Hero Section -->
    <section class="hero-section" id="hero">
      <div class="hero-inner">
        <div class="hero-badge">
          <span class="badge-dot"></span>
          <span>The Future of UGC</span>
        </div>
        
        <h1 class="hero-title">
          <span class="title-line">Create Content</span>
          <span class="title-line accent">That Matters</span>
        </h1>
        
        <p class="hero-subtitle">
          Join the next generation of creators. Collaborate with brands. 
          Build your legacy in the creator economy.
        </p>

        <div class="hero-cta">
          {user ? (
            isApproved ? (
              <a href="/dashboard" class="cta-primary">
                <span>Enter Dashboard</span>
                <span class="cta-arrow">→</span>
              </a>
            ) : (
              <span class="cta-pending">Application Pending</span>
            )
          ) : (
            <>
              <a href="/signup" class="cta-primary">
                <span>Start Creating</span>
                <span class="cta-arrow">→</span>
              </a>
              <a href="/campaigns" class="cta-secondary">
                <span>Explore Campaigns</span>
              </a>
            </>
          )}
        </div>

        <!-- Stats -->
        <div class="hero-stats">
          <div class="stat-item">
            <span class="stat-number">{creatorCount || 0}+</span>
            <span class="stat-label">Creators</span>
          </div>
          <div class="stat-divider"></div>
          <div class="stat-item">
            <span class="stat-number">{campaignCount || 0}</span>
            <span class="stat-label">Live Campaigns</span>
          </div>
          <div class="stat-divider"></div>
          <div class="stat-item">
            <span class="stat-number">$50k+</span>
            <span class="stat-label">Paid to Creators</span>
          </div>
        </div>
      </div>

      <div class="scroll-indicator">
        <span class="scroll-text">Scroll to explore</span>
        <div class="scroll-line"></div>
      </div>
    </section>

    <!-- Campaigns Section -->
    {showCampaigns && campaigns.length > 0 && (
      <section class="campaigns-section" id="campaigns">
        <div class="section-container">
          <div class="section-header">
            <div class="header-label">
              <span class="label-line"></span>
              <span>Active Opportunities</span>
            </div>
            <h2 class="section-title">Live Campaigns</h2>
            <p class="section-desc">Premium brand collaborations waiting for creators like you</p>
          </div>

          <div class="campaigns-grid">
            {campaigns.map((campaign, index) => (
              <article class="campaign-card" style={`--delay: ${index * 0.1}s`}>
                <div class="card-glow"></div>
                <div class="card-content">
                  <div class="card-header">
                    <span class="card-status">● Active</span>
                    {campaign.payment_per_post && (
                      <span class="card-payout">${campaign.payment_per_post}</span>
                    )}
                  </div>
                  
                  <h3 class="card-title">{campaign.title}</h3>
                  
                  {campaign.description && (
                    <p class="card-desc">{campaign.description.substring(0, 120)}{campaign.description.length > 120 ? '...' : ''}</p>
                  )}

                  <div class="card-meta">
                    {campaign.deadline && (
                      <span class="meta-item">
                        <span class="meta-icon">◇</span>
                        <span>Ends {new Date(campaign.deadline).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}</span>
                      </span>
                    )}
                  </div>

                  <div class="card-footer">
                    {isApproved ? (
                      <a href={`/campaigns/${campaign.slug}`} class="card-btn">
                        <span>Apply Now</span>
                        <span class="btn-arrow">→</span>
                      </a>
                    ) : user ? (
                      <span class="card-btn disabled">Pending Approval</span>
                    ) : (
                      <a href="/signup" class="card-btn">
                        <span>Join to Apply</span>
                        <span class="btn-arrow">→</span>
                      </a>
                    )}
                  </div>
                </div>
              </article>
            ))}
          </div>

          {isApproved && (
            <div class="section-footer">
              <a href="/campaigns" class="view-all-btn">
                <span>View All Campaigns</span>
                <span class="btn-icon">→</span>
              </a>
            </div>
          )}
        </div>
      </section>
    )}

    <!-- How It Works -->
    <section class="process-section" id="process">
      <div class="section-container">
        <div class="section-header center">
          <div class="header-label">
            <span class="label-line"></span>
            <span>The Process</span>
            <span class="label-line"></span>
          </div>
          <h2 class="section-title">How It Works</h2>
        </div>

        <div class="process-timeline">
          <div class="timeline-line"></div>
          
          <div class="process-step" data-step="01">
            <div class="step-marker">
              <span class="marker-number">01</span>
              <span class="marker-dot"></span>
            </div>
            <div class="step-content">
              <h3>Apply & Get Verified</h3>
              <p>Submit your application and let us verify your creator profile. Quality creators get priority access.</p>
            </div>
          </div>

          <div class="process-step" data-step="02">
            <div class="step-marker">
              <span class="marker-number">02</span>
              <span class="marker-dot"></span>
            </div>
            <div class="step-content">
              <h3>Discover Campaigns</h3>
              <p>Browse curated brand collaborations that match your niche, audience, and content style.</p>
            </div>
          </div>

          <div class="process-step" data-step="03">
            <div class="step-marker">
              <span class="marker-number">03</span>
              <span class="marker-dot"></span>
            </div>
            <div class="step-content">
              <h3>Create & Submit</h3>
              <p>Produce authentic content that resonates. Submit for brand review and approval.</p>
            </div>
          </div>

          <div class="process-step" data-step="04">
            <div class="step-marker">
              <span class="marker-number">04</span>
              <span class="marker-dot"></span>
            </div>
            <div class="step-content">
              <h3>Get Paid Fast</h3>
              <p>Receive payment directly to your account. No delays, no hassle.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    {!user && (
      <section class="cta-section" id="cta">
        <div class="cta-container">
          <div class="cta-bg-orb"></div>
          <div class="cta-content">
            <h2>Ready to Launch<br/>Your Creator Journey?</h2>
            <p>Join thousands of creators building their future with {general.siteName}</p>
            <a href="/signup" class="cta-main-btn">
              <span>Get Started Free</span>
              <span class="cta-btn-icon">✦</span>
            </a>
          </div>
        </div>
      </section>
    )}

    <!-- Footer -->
    <footer class="main-footer">
      <div class="footer-content">
        <div class="footer-brand">
          <span class="footer-logo">✦ {general.siteName}</span>
          <p>The premier platform for UGC creators</p>
        </div>
        <div class="footer-links">
          <a href="/campaigns">Campaigns</a>
          <a href="/community">Community</a>
          <a href="/login">Sign In</a>
        </div>
        <div class="footer-copy">
          <span>© 2024 {general.siteName}. All rights reserved.</span>
        </div>
      </div>
    </footer>
  </div>

  <style>
    /* ============================================
       COSMIC FOUNDATIONS
       ============================================ */
    :root {
      --void: #020206;
      --nebula: #080812;
      --stardust: #12121f;
      --cosmic-blue: #4f8bff;
      --cosmic-purple: #a855f7;
      --cosmic-pink: #ec4899;
      --cosmic-cyan: #22d3ee;
      --star-white: #f8fafc;
      --star-dim: #94a3b8;
      --glow-blue: rgba(79, 139, 255, 0.5);
      --glow-purple: rgba(168, 85, 247, 0.5);
      
      --font-display: 'Syne', sans-serif;
      --font-mono: 'Space Mono', monospace;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-display);
      background: var(--void);
      color: var(--star-white);
      overflow-x: hidden;
      line-height: 1.6;
    }

    /* Galaxy Canvas */
    #galaxy-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    .page-wrapper {
      position: relative;
      z-index: 1;
    }

    /* ============================================
       NAVIGATION
       ============================================ */
    .main-nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      padding: 1.25rem 2rem;
      background: linear-gradient(180deg, rgba(2, 2, 6, 0.95) 0%, rgba(2, 2, 6, 0.4) 70%, transparent 100%);
      backdrop-filter: blur(12px);
    }

    .nav-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .nav-logo {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      text-decoration: none;
      color: var(--star-white);
    }

    .logo-icon {
      font-size: 1.5rem;
      color: var(--cosmic-blue);
      animation: pulse-glow 3s ease-in-out infinite;
    }

    @keyframes pulse-glow {
      0%, 100% { text-shadow: 0 0 20px var(--glow-blue); }
      50% { text-shadow: 0 0 40px var(--glow-blue), 0 0 60px var(--glow-purple); }
    }

    .logo-text {
      font-size: 1.25rem;
      font-weight: 700;
      letter-spacing: -0.02em;
    }

    .nav-links {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .nav-links a:not(.nav-btn) {
      color: var(--star-dim);
      text-decoration: none;
      font-size: 0.9375rem;
      font-weight: 500;
      transition: color 0.3s;
    }

    .nav-links a:not(.nav-btn):hover {
      color: var(--star-white);
    }

    .nav-link-subtle {
      color: var(--star-dim) !important;
    }

    .nav-btn {
      padding: 0.625rem 1.5rem;
      background: linear-gradient(135deg, var(--cosmic-blue), var(--cosmic-purple));
      border-radius: 100px;
      color: white !important;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.875rem;
      transition: all 0.3s;
    }

    .nav-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 40px var(--glow-blue);
    }

    .nav-btn.pending {
      background: var(--stardust);
      color: var(--star-dim) !important;
      cursor: default;
    }

    /* ============================================
       ANNOUNCEMENTS
       ============================================ */
    .announcements-ticker {
      position: fixed;
      top: 70px;
      left: 0;
      right: 0;
      z-index: 999;
      padding: 0.5rem 0;
      background: linear-gradient(90deg, var(--cosmic-purple), var(--cosmic-blue));
      overflow: hidden;
    }

    .ticker-content {
      display: flex;
      align-items: center;
      gap: 3rem;
      animation: ticker-scroll 30s linear infinite;
      white-space: nowrap;
    }

    @keyframes ticker-scroll {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    .ticker-icon {
      color: white;
      font-size: 0.75rem;
    }

    .ticker-item {
      font-size: 0.8125rem;
      font-weight: 600;
      color: white;
    }

    /* Pending Banner */
    .pending-banner {
      position: fixed;
      top: 100px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 998;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1.5rem;
      background: rgba(251, 191, 36, 0.1);
      border: 1px solid rgba(251, 191, 36, 0.3);
      border-radius: 100px;
      backdrop-filter: blur(10px);
    }

    .pending-icon {
      color: #fbbf24;
    }

    .pending-banner span:last-child {
      font-size: 0.875rem;
      color: #fbbf24;
    }

    /* ============================================
       HERO SECTION
       ============================================ */
    .hero-section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 8rem 2rem 4rem;
      position: relative;
    }

    .hero-inner {
      max-width: 900px;
      text-align: center;
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem 1.25rem;
      background: rgba(79, 139, 255, 0.1);
      border: 1px solid rgba(79, 139, 255, 0.3);
      border-radius: 100px;
      margin-bottom: 2rem;
      animation: fade-in-up 1s ease-out;
    }

    .badge-dot {
      width: 8px;
      height: 8px;
      background: var(--cosmic-blue);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.5); opacity: 0.5; }
    }

    .hero-badge span:last-child {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--cosmic-blue);
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }

    .hero-title {
      font-size: clamp(3rem, 10vw, 6rem);
      font-weight: 800;
      line-height: 1.05;
      letter-spacing: -0.03em;
      margin-bottom: 1.5rem;
    }

    .title-line {
      display: block;
      animation: fade-in-up 1s ease-out;
    }

    .title-line:nth-child(2) {
      animation-delay: 0.2s;
    }

    .title-line.accent {
      background: linear-gradient(135deg, var(--cosmic-blue), var(--cosmic-purple), var(--cosmic-pink));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    @keyframes fade-in-up {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .hero-subtitle {
      font-size: 1.25rem;
      color: var(--star-dim);
      max-width: 600px;
      margin: 0 auto 2.5rem;
      animation: fade-in-up 1s ease-out 0.4s backwards;
    }

    .hero-cta {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 4rem;
      animation: fade-in-up 1s ease-out 0.6s backwards;
    }

    .cta-primary {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, var(--cosmic-blue), var(--cosmic-purple));
      border-radius: 100px;
      color: white;
      text-decoration: none;
      font-weight: 700;
      font-size: 1rem;
      transition: all 0.3s;
      position: relative;
      overflow: hidden;
    }

    .cta-primary::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, var(--cosmic-purple), var(--cosmic-pink));
      opacity: 0;
      transition: opacity 0.3s;
    }

    .cta-primary:hover::before {
      opacity: 1;
    }

    .cta-primary span {
      position: relative;
      z-index: 1;
    }

    .cta-primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 20px 60px var(--glow-purple);
    }

    .cta-arrow {
      transition: transform 0.3s;
    }

    .cta-primary:hover .cta-arrow {
      transform: translateX(4px);
    }

    .cta-secondary {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem 2rem;
      background: transparent;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 100px;
      color: var(--star-white);
      text-decoration: none;
      font-weight: 600;
      font-size: 1rem;
      transition: all 0.3s;
    }

    .cta-secondary:hover {
      border-color: var(--cosmic-blue);
      background: rgba(79, 139, 255, 0.1);
    }

    .cta-pending {
      padding: 1rem 2rem;
      background: var(--stardust);
      border-radius: 100px;
      color: var(--star-dim);
      font-weight: 600;
    }

    /* Hero Stats */
    .hero-stats {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 3rem;
      animation: fade-in-up 1s ease-out 0.8s backwards;
    }

    .stat-item {
      text-align: center;
    }

    .stat-number {
      display: block;
      font-family: var(--font-mono);
      font-size: 2rem;
      font-weight: 700;
      color: var(--star-white);
      letter-spacing: -0.02em;
    }

    .stat-label {
      font-size: 0.8125rem;
      color: var(--star-dim);
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .stat-divider {
      width: 1px;
      height: 40px;
      background: linear-gradient(180deg, transparent, rgba(255,255,255,0.2), transparent);
    }

    /* Scroll Indicator */
    .scroll-indicator {
      position: absolute;
      bottom: 2rem;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      animation: fade-in 1s ease-out 1.2s backwards;
    }

    .scroll-text {
      font-size: 0.75rem;
      color: var(--star-dim);
      text-transform: uppercase;
      letter-spacing: 0.15em;
    }

    .scroll-line {
      width: 1px;
      height: 60px;
      background: linear-gradient(180deg, var(--cosmic-blue), transparent);
      animation: scroll-pulse 2s ease-in-out infinite;
    }

    @keyframes scroll-pulse {
      0%, 100% { transform: scaleY(1); opacity: 1; }
      50% { transform: scaleY(0.5); opacity: 0.5; }
    }

    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* ============================================
       CAMPAIGNS SECTION
       ============================================ */
    .campaigns-section {
      padding: 8rem 2rem;
      position: relative;
    }

    .section-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .section-header {
      margin-bottom: 4rem;
    }

    .section-header.center {
      text-align: center;
    }

    .header-label {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .section-header.center .header-label {
      justify-content: center;
    }

    .label-line {
      width: 30px;
      height: 1px;
      background: var(--cosmic-blue);
    }

    .header-label span:not(.label-line) {
      font-size: 0.8125rem;
      color: var(--cosmic-blue);
      text-transform: uppercase;
      letter-spacing: 0.15em;
      font-weight: 600;
    }

    .section-title {
      font-size: clamp(2rem, 5vw, 3rem);
      font-weight: 800;
      letter-spacing: -0.02em;
      margin-bottom: 0.75rem;
    }

    .section-desc {
      font-size: 1.125rem;
      color: var(--star-dim);
    }

    /* Campaign Cards */
    .campaigns-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
      gap: 1.5rem;
    }

    .campaign-card {
      position: relative;
      background: linear-gradient(135deg, rgba(18, 18, 31, 0.7), rgba(8, 8, 18, 0.7));
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 24px;
      overflow: hidden;
      animation: card-in 0.8s ease-out var(--delay) backwards;
      transition: all 0.4s;
      backdrop-filter: blur(10px);
    }

    @keyframes card-in {
      from {
        opacity: 0;
        transform: translateY(40px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .campaign-card:hover {
      transform: translateY(-8px);
      border-color: rgba(79, 139, 255, 0.3);
    }

    .card-glow {
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, var(--glow-blue) 0%, transparent 70%);
      opacity: 0;
      transition: opacity 0.4s;
      pointer-events: none;
    }

    .campaign-card:hover .card-glow {
      opacity: 0.1;
    }

    .card-content {
      position: relative;
      padding: 1.75rem;
      z-index: 1;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .card-status {
      font-size: 0.75rem;
      font-weight: 600;
      color: #10b981;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .card-payout {
      font-family: var(--font-mono);
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--cosmic-cyan);
    }

    .card-title {
      font-size: 1.375rem;
      font-weight: 700;
      margin-bottom: 0.75rem;
      line-height: 1.3;
    }

    .card-desc {
      font-size: 0.9375rem;
      color: var(--star-dim);
      line-height: 1.6;
      margin-bottom: 1rem;
    }

    .card-meta {
      margin-bottom: 1.5rem;
    }

    .meta-item {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.8125rem;
      color: var(--star-dim);
    }

    .meta-icon {
      color: var(--cosmic-purple);
      font-size: 0.625rem;
    }

    .card-footer {
      padding-top: 1.25rem;
      border-top: 1px solid rgba(255, 255, 255, 0.08);
    }

    .card-btn {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      padding: 0.875rem 1.25rem;
      background: linear-gradient(135deg, rgba(79, 139, 255, 0.2), rgba(168, 85, 247, 0.2));
      border: 1px solid rgba(79, 139, 255, 0.3);
      border-radius: 12px;
      color: var(--star-white);
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9375rem;
      transition: all 0.3s;
    }

    .card-btn:hover {
      background: linear-gradient(135deg, var(--cosmic-blue), var(--cosmic-purple));
      border-color: transparent;
    }

    .card-btn.disabled {
      background: rgba(255, 255, 255, 0.05);
      border-color: rgba(255, 255, 255, 0.1);
      color: var(--star-dim);
      cursor: default;
    }

    .btn-arrow {
      transition: transform 0.3s;
    }

    .card-btn:hover .btn-arrow {
      transform: translateX(4px);
    }

    /* Section Footer */
    .section-footer {
      margin-top: 3rem;
      text-align: center;
    }

    .view-all-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.875rem 2rem;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 100px;
      color: var(--star-white);
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s;
    }

    .view-all-btn:hover {
      border-color: var(--cosmic-blue);
      background: rgba(79, 139, 255, 0.1);
    }

    /* ============================================
       PROCESS SECTION
       ============================================ */
    .process-section {
      padding: 8rem 2rem;
      background: linear-gradient(180deg, transparent, rgba(79, 139, 255, 0.02), transparent);
    }

    .process-timeline {
      position: relative;
      max-width: 800px;
      margin: 0 auto;
    }

    .timeline-line {
      position: absolute;
      left: 28px;
      top: 0;
      bottom: 0;
      width: 1px;
      background: linear-gradient(180deg, 
        rgba(79, 139, 255, 0.6), 
        rgba(168, 85, 247, 0.6), 
        rgba(236, 72, 153, 0.4), 
        rgba(34, 211, 238, 0.4)
      );
      box-shadow: 0 0 10px rgba(79, 139, 255, 0.3);
    }

    .process-step {
      position: relative;
      display: flex;
      gap: 2rem;
      padding: 2rem 0;
    }

    .step-marker {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
    }

    .marker-number {
      font-family: var(--font-mono);
      font-size: 0.75rem;
      font-weight: 700;
      color: var(--cosmic-blue);
      letter-spacing: 0.1em;
    }

    .marker-dot {
      width: 12px;
      height: 12px;
      background: var(--void);
      border: 2px solid var(--cosmic-blue);
      border-radius: 50%;
      transition: all 0.3s;
      box-shadow: 0 0 8px rgba(79, 139, 255, 0.5);
    }

    .process-step:nth-child(3) .marker-dot { 
      border-color: var(--cosmic-purple); 
      box-shadow: 0 0 8px rgba(168, 85, 247, 0.5);
    }
    .process-step:nth-child(4) .marker-dot { 
      border-color: var(--cosmic-pink); 
      box-shadow: 0 0 8px rgba(236, 72, 153, 0.5);
    }
    .process-step:nth-child(5) .marker-dot { 
      border-color: var(--cosmic-cyan); 
      box-shadow: 0 0 8px rgba(34, 211, 238, 0.5);
    }

    .process-step:hover .marker-dot {
      background: currentColor;
      transform: scale(1.3);
    }

    .step-content {
      flex: 1;
      padding-top: 0.25rem;
    }

    .step-content h3 {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .step-content p {
      color: var(--star-dim);
      line-height: 1.7;
    }

    /* ============================================
       CTA SECTION
       ============================================ */
    .cta-section {
      padding: 8rem 2rem;
      position: relative;
      overflow: hidden;
    }

    .cta-container {
      position: relative;
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
    }

    .cta-bg-orb {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, var(--glow-purple) 0%, var(--glow-blue) 30%, transparent 70%);
      opacity: 0.3;
      filter: blur(80px);
      pointer-events: none;
    }

    .cta-content {
      position: relative;
      z-index: 1;
    }

    .cta-content h2 {
      font-size: clamp(2rem, 6vw, 3.5rem);
      font-weight: 800;
      line-height: 1.1;
      letter-spacing: -0.02em;
      margin-bottom: 1.5rem;
    }

    .cta-content p {
      font-size: 1.125rem;
      color: var(--star-dim);
      margin-bottom: 2.5rem;
    }

    .cta-main-btn {
      display: inline-flex;
      align-items: center;
      gap: 1rem;
      padding: 1.25rem 3rem;
      background: linear-gradient(135deg, var(--cosmic-blue), var(--cosmic-purple));
      border-radius: 100px;
      color: white;
      text-decoration: none;
      font-weight: 700;
      font-size: 1.125rem;
      transition: all 0.4s;
    }

    .cta-main-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 30px 80px var(--glow-purple);
    }

    .cta-btn-icon {
      font-size: 1.25rem;
      animation: spin 4s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* ============================================
       FOOTER
       ============================================ */
    .main-footer {
      padding: 4rem 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.03);
      background: linear-gradient(180deg, transparent, rgba(2, 2, 6, 0.8));
    }

    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 2rem;
    }

    .footer-logo {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--star-white);
    }

    .footer-brand p {
      margin-top: 0.5rem;
      font-size: 0.875rem;
      color: var(--star-dim);
    }

    .footer-links {
      display: flex;
      gap: 2rem;
    }

    .footer-links a {
      color: var(--star-dim);
      text-decoration: none;
      font-size: 0.9375rem;
      transition: color 0.3s;
    }

    .footer-links a:hover {
      color: var(--star-white);
    }

    .footer-copy {
      width: 100%;
      text-align: center;
      padding-top: 2rem;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      margin-top: 1rem;
    }

    .footer-copy span {
      font-size: 0.8125rem;
      color: var(--star-dim);
    }

    /* ============================================
       RESPONSIVE
       ============================================ */
    @media (max-width: 768px) {
      .nav-links {
        gap: 1rem;
      }

      .nav-links a:not(.nav-btn):not(.nav-link-subtle) {
        display: none;
      }

      .hero-stats {
        flex-direction: column;
        gap: 1.5rem;
      }

      .stat-divider {
        width: 40px;
        height: 1px;
      }

      .campaigns-grid {
        grid-template-columns: 1fr;
      }

      .process-step {
        padding-left: 0;
      }

      .timeline-line {
        left: 20px;
      }

      .footer-content {
        flex-direction: column;
        text-align: center;
      }
    }
  </style>

  <!-- Cosmic Galaxy Particle System -->
  <script is:inline>
    class CosmicGalaxy {
      constructor(canvas) {
        this.canvas = canvas;
        this.ctx = canvas.getContext('2d');
        this.stars = [];
        this.time = 0;
        this.mouseX = 0;
        this.mouseY = 0;
        this.targetMouseX = 0;
        this.targetMouseY = 0;
        this.scrollY = 0;
        this.expansionFactor = 1;
        
        // Galaxy center
        this.centerX = 0;
        this.centerY = 0;
        
        // Galaxy parameters for croissant shape
        this.baseRadius = 280;
        this.numArms = 2;
        this.armTightness = 0.22;
        this.armSpread = 0.6;
        this.tiltAngle = 0.32; // Croissant tilt
        
        // Star counts - LOTS of stars
        this.galaxyStarCount = 6000;
        this.backgroundStarCount = 800;
        this.brightStarCount = 150;
        this.dustCloudCount = 80;
        
        this.init();
        this.bindEvents();
        this.animate();
      }

      init() {
        this.resize();
        this.createBackgroundStars();
        this.createGalaxyStars();
        this.createBrightStars();
        this.createDustClouds();
      }

      resize() {
        this.canvas.width = window.innerWidth;
        this.canvas.height = window.innerHeight;
        this.centerX = this.canvas.width / 2;
        this.centerY = this.canvas.height / 2;
      }

      // Background stars - distant, subtle twinkling
      createBackgroundStars() {
        this.backgroundStars = [];
        for (let i = 0; i < this.backgroundStarCount; i++) {
          this.backgroundStars.push({
            x: Math.random() * this.canvas.width,
            y: Math.random() * this.canvas.height,
            size: Math.random() * 1.2 + 0.3,
            brightness: Math.random() * 0.6 + 0.2,
            twinkleSpeed: Math.random() * 0.03 + 0.01,
            twinklePhase: Math.random() * Math.PI * 2,
            color: this.getStarColor(Math.random())
          });
        }
      }

      // Main galaxy stars - forming the spiral croissant shape
      createGalaxyStars() {
        this.stars = [];
        
        for (let i = 0; i < this.galaxyStarCount; i++) {
          // Which spiral arm
          const arm = i % this.numArms;
          const armOffset = (arm / this.numArms) * Math.PI * 2;
          
          // Distance from center - exponential for density near core
          const t = Math.pow(Math.random(), 0.45);
          const baseDistance = t * this.baseRadius;
          
          // Spiral angle based on distance
          const spiralAngle = baseDistance * this.armTightness + armOffset;
          
          // Spread - tighter near core, looser at edges
          const spread = (Math.random() - 0.5) * this.armSpread * (0.3 + t * 0.7);
          const angle = spiralAngle + spread;
          
          // Vertical spread for thickness (less near core)
          const zSpread = (Math.random() - 0.5) * 60 * t;
          
          // Star properties
          const distanceRatio = baseDistance / this.baseRadius;
          const starColor = this.getStarColor(distanceRatio);
          const starSize = Math.random() * 1.5 + 0.4;
          
          // Floating motion - each star drifts slightly
          const floatRadius = Math.random() * 8 + 2;
          const floatSpeed = Math.random() * 0.0008 + 0.0002;
          const floatPhase = Math.random() * Math.PI * 2;
          const floatPhase2 = Math.random() * Math.PI * 2;
          
          this.stars.push({
            // Base spiral position
            baseAngle: angle,
            baseDistance: baseDistance,
            z: zSpread,
            
            // Current calculated position
            x: 0,
            y: 0,
            
            // Visual properties
            size: starSize,
            color: starColor,
            brightness: Math.random() * 0.7 + 0.3,
            
            // Orbital rotation
            orbitSpeed: (Math.random() * 0.0002 + 0.00005) * (1 - t * 0.5),
            
            // Floating/drifting motion
            floatRadius: floatRadius,
            floatSpeed: floatSpeed,
            floatPhase: floatPhase,
            floatPhase2: floatPhase2,
            
            // Twinkle
            twinkleSpeed: Math.random() * 0.04 + 0.01,
            twinklePhase: Math.random() * Math.PI * 2,
            
            // Distance from center for effects
            distanceRatio: distanceRatio
          });
        }
        
        // Add denser core stars
        for (let i = 0; i < 1200; i++) {
          const distance = Math.pow(Math.random(), 2) * 40;
          const angle = Math.random() * Math.PI * 2;
          const z = (Math.random() - 0.5) * 20;
          
          this.stars.push({
            baseAngle: angle,
            baseDistance: distance,
            z: z,
            x: 0,
            y: 0,
            size: Math.random() * 1.8 + 0.5,
            color: this.getStarColor(0.05 + Math.random() * 0.15),
            brightness: Math.random() * 0.4 + 0.6,
            orbitSpeed: Math.random() * 0.0006 + 0.0002,
            floatRadius: Math.random() * 4 + 1,
            floatSpeed: Math.random() * 0.001 + 0.0005,
            floatPhase: Math.random() * Math.PI * 2,
            floatPhase2: Math.random() * Math.PI * 2,
            twinkleSpeed: Math.random() * 0.05 + 0.02,
            twinklePhase: Math.random() * Math.PI * 2,
            distanceRatio: 0.1,
            isCore: true
          });
        }
      }

      // Bright prominent stars scattered throughout
      createBrightStars() {
        this.brightStars = [];
        for (let i = 0; i < this.brightStarCount; i++) {
          const arm = i % this.numArms;
          const armOffset = (arm / this.numArms) * Math.PI * 2;
          const t = Math.pow(Math.random(), 0.6);
          const distance = t * this.baseRadius * 1.1;
          const angle = distance * this.armTightness + armOffset + (Math.random() - 0.5) * 0.8;
          
          this.brightStars.push({
            baseAngle: angle,
            baseDistance: distance,
            z: (Math.random() - 0.5) * 40,
            x: 0,
            y: 0,
            size: Math.random() * 2 + 1.5,
            color: this.getStarColor(Math.random() * 0.4),
            brightness: Math.random() * 0.3 + 0.7,
            orbitSpeed: Math.random() * 0.0002 + 0.00008,
            floatRadius: Math.random() * 6 + 3,
            floatSpeed: Math.random() * 0.0006 + 0.0002,
            floatPhase: Math.random() * Math.PI * 2,
            floatPhase2: Math.random() * Math.PI * 2,
            twinkleSpeed: Math.random() * 0.02 + 0.005,
            twinklePhase: Math.random() * Math.PI * 2,
            glowSize: Math.random() * 8 + 4,
            distanceRatio: t
          });
        }
      }

      // Subtle dust/nebula clouds
      createDustClouds() {
        this.dustClouds = [];
        const colors = [
          { r: 79, g: 139, b: 255 },
          { r: 168, g: 85, b: 247 },
          { r: 139, g: 92, b: 246 },
          { r: 59, g: 130, b: 246 }
        ];
        
        for (let i = 0; i < this.dustCloudCount; i++) {
          const arm = i % this.numArms;
          const armOffset = (arm / this.numArms) * Math.PI * 2;
          const t = Math.random();
          const distance = t * this.baseRadius * 1.3 + 30;
          const angle = distance * this.armTightness + armOffset + (Math.random() - 0.5);
          const color = colors[Math.floor(Math.random() * colors.length)];
          
          this.dustClouds.push({
            baseAngle: angle,
            baseDistance: distance,
            x: 0,
            y: 0,
            size: Math.random() * 80 + 40,
            color: color,
            opacity: Math.random() * 0.025 + 0.01,
            orbitSpeed: Math.random() * 0.00008 + 0.00002
          });
        }
      }

      getStarColor(distanceRatio) {
        // Stars range from warm white/yellow near core to blue at edges
        if (distanceRatio < 0.15) {
          // Core - warm white to pale yellow
          const r = 255;
          const g = 240 + Math.random() * 15;
          const b = 210 + Math.random() * 30;
          return { r, g, b };
        } else if (distanceRatio < 0.35) {
          // Inner - white to pale blue
          const r = 220 + Math.random() * 35;
          const g = 230 + Math.random() * 25;
          const b = 255;
          return { r, g, b };
        } else if (distanceRatio < 0.6) {
          // Mid - blue-white
          const r = 180 + Math.random() * 50;
          const g = 200 + Math.random() * 40;
          const b = 255;
          return { r, g, b };
        } else {
          // Outer - blue to purple
          const r = 150 + Math.random() * 60;
          const g = 160 + Math.random() * 60;
          const b = 230 + Math.random() * 25;
          return { r, g, b };
        }
      }

      bindEvents() {
        window.addEventListener('resize', () => {
          this.resize();
          this.createBackgroundStars();
        });
        
        window.addEventListener('scroll', () => {
          this.scrollY = window.scrollY;
          const scrollMax = Math.max(1, document.body.scrollHeight - window.innerHeight);
          this.expansionFactor = 1 + (this.scrollY / scrollMax) * 3.5;
        });

        window.addEventListener('mousemove', (e) => {
          this.targetMouseX = (e.clientX - this.centerX) / this.canvas.width;
          this.targetMouseY = (e.clientY - this.centerY) / this.canvas.height;
        });
      }

      updateStars() {
        this.time += 0.016;
        
        // Smooth mouse following
        this.mouseX += (this.targetMouseX - this.mouseX) * 0.05;
        this.mouseY += (this.targetMouseY - this.mouseY) * 0.05;
        
        const perspective = 600;
        const tiltX = this.tiltAngle + this.mouseY * 0.1;
        const tiltY = this.mouseX * 0.15;
        
        // Update galaxy stars
        this.stars.forEach(star => {
          // Orbital rotation
          star.baseAngle += star.orbitSpeed;
          
          // Floating motion - gives stars a gentle drift
          const floatX = Math.sin(this.time * star.floatSpeed + star.floatPhase) * star.floatRadius;
          const floatY = Math.cos(this.time * star.floatSpeed * 0.7 + star.floatPhase2) * star.floatRadius * 0.6;
          
          // Calculate expanded position
          const expandedDistance = star.baseDistance * this.expansionFactor;
          
          // Spiral position
          const x = Math.cos(star.baseAngle) * expandedDistance + floatX;
          const y = Math.sin(star.baseAngle) * expandedDistance;
          const z = star.z * (1 + (this.expansionFactor - 1) * 0.3);
          
          // Apply croissant tilt (3D rotation)
          const y2 = y * Math.cos(tiltX) - z * Math.sin(tiltX);
          const z2 = y * Math.sin(tiltX) + z * Math.cos(tiltX);
          const x2 = x * Math.cos(tiltY) + z2 * Math.sin(tiltY);
          const z3 = -x * Math.sin(tiltY) + z2 * Math.cos(tiltY);
          
          // Perspective projection
          const scale = perspective / (perspective + z3);
          
          star.x = this.centerX + x2 * scale + floatY * scale;
          star.y = this.centerY + y2 * scale;
          star.scale = scale;
          
          // Twinkle
          star.twinkle = 0.6 + 0.4 * Math.sin(this.time * star.twinkleSpeed + star.twinklePhase);
        });

        // Update bright stars
        this.brightStars.forEach(star => {
          star.baseAngle += star.orbitSpeed;
          
          const floatX = Math.sin(this.time * star.floatSpeed + star.floatPhase) * star.floatRadius;
          const floatY = Math.cos(this.time * star.floatSpeed * 0.8 + star.floatPhase2) * star.floatRadius * 0.5;
          
          const expandedDistance = star.baseDistance * this.expansionFactor;
          
          const x = Math.cos(star.baseAngle) * expandedDistance + floatX;
          const y = Math.sin(star.baseAngle) * expandedDistance;
          const z = star.z * (1 + (this.expansionFactor - 1) * 0.3);
          
          const y2 = y * Math.cos(tiltX) - z * Math.sin(tiltX);
          const z2 = y * Math.sin(tiltX) + z * Math.cos(tiltX);
          const x2 = x * Math.cos(tiltY) + z2 * Math.sin(tiltY);
          const z3 = -x * Math.sin(tiltY) + z2 * Math.cos(tiltY);
          
          const scale = perspective / (perspective + z3);
          
          star.x = this.centerX + x2 * scale + floatY * scale;
          star.y = this.centerY + y2 * scale;
          star.scale = scale;
          star.twinkle = 0.7 + 0.3 * Math.sin(this.time * star.twinkleSpeed + star.twinklePhase);
        });

        // Update dust clouds
        this.dustClouds.forEach(cloud => {
          cloud.baseAngle += cloud.orbitSpeed;
          
          const expandedDistance = cloud.baseDistance * this.expansionFactor;
          const x = Math.cos(cloud.baseAngle) * expandedDistance;
          const y = Math.sin(cloud.baseAngle) * expandedDistance * Math.cos(tiltX);
          
          cloud.x = this.centerX + x;
          cloud.y = this.centerY + y;
        });
      }

      render() {
        // Clear to deep space black
        this.ctx.fillStyle = '#020206';
        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);

        // Draw background stars with twinkle
        this.backgroundStars.forEach(star => {
          const twinkle = 0.5 + 0.5 * Math.sin(this.time * star.twinkleSpeed + star.twinklePhase);
          const alpha = star.brightness * twinkle;
          
          this.ctx.beginPath();
          this.ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
          this.ctx.fillStyle = `rgba(${star.color.r}, ${star.color.g}, ${star.color.b}, ${alpha})`;
          this.ctx.fill();
        });

        // Draw dust clouds (nebula effect)
        this.ctx.globalCompositeOperation = 'lighter';
        this.dustClouds.forEach(cloud => {
          const expandedSize = cloud.size * Math.pow(this.expansionFactor, 0.6);
          const gradient = this.ctx.createRadialGradient(
            cloud.x, cloud.y, 0,
            cloud.x, cloud.y, expandedSize
          );
          gradient.addColorStop(0, `rgba(${cloud.color.r}, ${cloud.color.g}, ${cloud.color.b}, ${cloud.opacity})`);
          gradient.addColorStop(0.5, `rgba(${cloud.color.r}, ${cloud.color.g}, ${cloud.color.b}, ${cloud.opacity * 0.3})`);
          gradient.addColorStop(1, 'transparent');
          
          this.ctx.fillStyle = gradient;
          this.ctx.beginPath();
          this.ctx.arc(cloud.x, cloud.y, expandedSize, 0, Math.PI * 2);
          this.ctx.fill();
        });
        this.ctx.globalCompositeOperation = 'source-over';

        // Sort all galaxy stars by depth
        const sortedStars = [...this.stars].sort((a, b) => (a.scale || 0) - (b.scale || 0));

        // Draw galaxy stars
        sortedStars.forEach(star => {
          if (star.x < -50 || star.x > this.canvas.width + 50 ||
              star.y < -50 || star.y > this.canvas.height + 50) return;
          
          const size = star.size * (star.scale || 1);
          const alpha = star.brightness * star.twinkle * (star.scale || 1);
          
          // Draw star
          this.ctx.beginPath();
          this.ctx.arc(star.x, star.y, Math.max(0.3, size), 0, Math.PI * 2);
          this.ctx.fillStyle = `rgba(${star.color.r}, ${star.color.g}, ${star.color.b}, ${Math.min(1, alpha)})`;
          this.ctx.fill();
        });

        // Draw bright stars with glow
        this.ctx.globalCompositeOperation = 'lighter';
        this.brightStars.forEach(star => {
          if (star.x < -50 || star.x > this.canvas.width + 50 ||
              star.y < -50 || star.y > this.canvas.height + 50) return;
          
          const size = star.size * (star.scale || 1);
          const alpha = star.brightness * star.twinkle;
          const glowSize = star.glowSize * (star.scale || 1) * this.expansionFactor * 0.5;
          
          // Glow
          const gradient = this.ctx.createRadialGradient(
            star.x, star.y, 0,
            star.x, star.y, glowSize
          );
          gradient.addColorStop(0, `rgba(${star.color.r}, ${star.color.g}, ${star.color.b}, ${alpha * 0.4})`);
          gradient.addColorStop(0.4, `rgba(${star.color.r}, ${star.color.g}, ${star.color.b}, ${alpha * 0.1})`);
          gradient.addColorStop(1, 'transparent');
          
          this.ctx.fillStyle = gradient;
          this.ctx.beginPath();
          this.ctx.arc(star.x, star.y, glowSize, 0, Math.PI * 2);
          this.ctx.fill();
          
          // Star core
          this.ctx.beginPath();
          this.ctx.arc(star.x, star.y, size, 0, Math.PI * 2);
          this.ctx.fillStyle = `rgba(${star.color.r}, ${star.color.g}, ${star.color.b}, ${Math.min(1, alpha + 0.2)})`;
          this.ctx.fill();
        });
        this.ctx.globalCompositeOperation = 'source-over';

        // Galaxy core glow
        const coreSize = 60 * Math.pow(this.expansionFactor, 0.4);
        const coreGradient = this.ctx.createRadialGradient(
          this.centerX, this.centerY, 0,
          this.centerX, this.centerY, coreSize
        );
        coreGradient.addColorStop(0, 'rgba(255, 250, 240, 0.15)');
        coreGradient.addColorStop(0.3, 'rgba(255, 240, 220, 0.08)');
        coreGradient.addColorStop(0.6, 'rgba(200, 180, 255, 0.03)');
        coreGradient.addColorStop(1, 'transparent');
        
        this.ctx.fillStyle = coreGradient;
        this.ctx.beginPath();
        this.ctx.arc(this.centerX, this.centerY, coreSize, 0, Math.PI * 2);
        this.ctx.fill();
      }

      animate() {
        this.updateStars();
        this.render();
        requestAnimationFrame(() => this.animate());
      }
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      const canvas = document.getElementById('galaxy-canvas');
      if (canvas) {
        new CosmicGalaxy(canvas);
      }
    });
  </script>
</body>
</html>
